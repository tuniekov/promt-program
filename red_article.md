# Эксперимент промпт-программа
Развитие нейросетей сделало возможными некоторые ранее сложные вещи. Сейчас хочу поэкспериментировать с тем, что я называю промпт-программа.
В классическом программировании мы пишем какой-то код и компьютер его компилирует и выполняет. 
В вайб-программировании мы пишем инструкции на естественном языке и нейросеть превращает их в классический код, который затем компилируется и выполняется.

Но зачем нам классический код, когда нейросеть может сама выполнить алгоритм, заданный на естественном языке?

Конечно, сейчас это дорого, но поразвлекаться можно.

Например, у нас техзадание: "Запроси ввести пароль и затем сохрани его в файл pass.txt"

Для классического программирования надо писать консольную программу на node.js или других языках. Можно попросить написать такую программу нейросеть. 
Но зачем? Если этот алгоритм может выполнить нейросеть? Просто вводим тз в нее, и она такую программу просто выполнит. 
(Если, конечно, у нее есть доступ к файлам.)

Для лучшего понимания написал реализацию произвольной промпт-программы на сайте.

## Реализация для сайта. Первый эксперимент.
На страничке сайта выводим 2 области:
1. Форма системного промпта, в который пользователь записывает алгоритм программы на естественном языке.
2. Область, в которую нейросеть генерирует интерфейс программы в html.

Пользователь забивает в форму то, что он хочет от программы, а нейросеть генерирует в область интерфейса код html и css. 
При кликах, вводах и других действиях пользователя в интерфейсе все его действия отправляются нейросети. 
А она модифицирует соответствующим образом область интерфейса, выполняя алгоритм программы.

Тестировал промпт-приложения калькулятор и крестики-нолики. Калькулятор прям работает, а крестики-нолики создаются, но при попытке играть нейросеть не до конца понимает, что нужно делать. 

Потестировать с бесплатными нейросетями можно на http://85.117.231.47/, чтобы потестировать с платными, разверните приложение у себя с репозитория https://github.com/tuniekov/promt-program.

Написал эту программу для сайта скорее в развлекательных целях, но в итоге научился некоторым вещам и возникло множество идей, которые расскажу ниже. 
Так что получилась обучающе-развлекательная исследовательская разработка.

# Плюсы минусы промпт-программы
## Минусы
1. Промпт-программа - это прямо чрезвычайно дорого. При каждом клике идет платный запрос в большую языковую модель вроде клауде 3.7 соннет, и программа потребляет много денег.
2. Программа тупит. Каждый запрос в нейросеть - это около 2-10 секунд.
3. Нейросеть не всегда верно понимает, что от нее нужно.
## Плюсы
1. Код промпт-программы на естественном языке на порядки короче кода на классическом языке. Запрос "Давай сыграем в крестики-нолики" на порядки короче любого кода крестиков-ноликов на классическом языке программирования. Нейросеть додумывает задачу.

Это важно, так как человек-программист вряд ли сможет написать более 100 строк кода в час. Чем короче код, который приходится писать, тем быстрее пишется программа. Многие библиотеки и фреймворки предназначены именно для сокращения нужного кода.
2. Существует некоторый класс задач, код для которых или вообще невозможно написать, или нереально написать человеку-программисту за разумное время, 
но с этими задачами легко справляется нейросеть.

Для примера, 2 года назад мы хотели сделать менеджер задач для нашей компании. Например, такая задача. Звонит клиент, и менеджер делает ему расчет товаров. Затем клиент получает расчет и думает, будет он делать заказ, или ему нужно что-то поправить, или он отказывается. Нужно, чтоб клиенты не терялись, и менеджеры должны периодически звонить им. Но менеджеры, конечно, забывают. И им нужно напоминание в менеджере задач. Если клиент сказал, например, перезвоните позже, то нужно автоматически запланировать следующее напоминание по этому расчету. Также нужно автоматически проверить, что задача правильно выполнена при ее закрытии. И самый смак: директор хотел, чтобы они сами могли писать эти задачи с условиями перезапуска задачи и ее закрытия.

Для того, чтобы написать автоматические условия в классическом программировании, надо учить язык программирования. Что им некогда. Либо писать какой-то метаязык, который им снова некогда будет учить. То есть это не решаемая задача для классического программирования.

Но с нейросетями эта задача становится решаемой. При создании типа напоминания директор пишет условия закрытия и условия пересоздания напоминания на естественном языке. Менеджер в комментарии к напоминанию пишет "Перезвонить через 2 недели". Даем нейросети доступ к созданию напоминаний и отправляем ей условия и комментарий. Нейросеть создает напоминание перезвонить на дату через 2 недели от текущей. 

Теоретически с нейросетями нужный директору менеджер задач становится возможным спрограммировать. Хотя еще не ясно, как хорошо он будет работать, но думаю, как-то более-менее работать будет. Если директор одобрит, то начну его разрабатывать.

# Подходы к программированию программ с нейросетями
Сейчас, наверное, можно программировать 2-мя способами:
1. Добавлять нейросети. 
То есть, добавлять в классические программы вызовы нейросетей там, где это необходимо.
2. Добавлять классический код в промпт-программы. 
То есть, писать изначально промпт-программы на естественном языке. Так, как это сделано в промпт-программе на сайте. Только, чтобы программа работала быстрее и подешевле, разрешить нейросети добавлять код js в окно интерфейса программы и чтобы запрос к нейросети шел, когда js код не справился.   

Второй подход только придумался и еще не понято, как это в реальности будет выглядеть. Но если он заработает, то есть такое ощущение, что писать изначально промпт-программы гораздо выгоднее в плане функциональности программ, скорости и реальности их разработки. Возможно, что даже выгоднее распарсить существующие классические программы в код на естественном языке и запускать их как промпт-программы.

# Промпт-движок
Для функционирования программы на естественном языке нужна некоторая классическая программа, которая будет организовывать взаимодействие компьютера с нейросетью. Такая, как промпт-программа на сайте. Давайте назовем такую программу промпт-движком.

"Промпт-программа на сайте" написана с помощью Cline. Она примитивна и мало что умеет. Примером мощного промпт-движка можно назвать сам Cline. Он одновременно и движок, и промпт-программа. Он умеет читать и писать в файлы, запускать терминал и многое другое. Также в нем большой и сложный системный промпт, который инструктирует нейросеть, как писать программы.

В .clinerules можно написать инструкцию:

# Выполни при запросе список задач
1. Прочитай файл .clinerules-bank\.tasks.
2. Используй инструмент `ask_followup_question` 
\`\`\`xml
<ask_followup_question>
<question>Какую задачу загрузить?</question>
<options>["Создать новую", "[Имя задачи]"]</options>
</ask_followup_question>
\`\`\`
Используй в опциях `ask_followup_question` все имена активных задач из .clinerules-bank\.tasks.
3. Когда пользователь выбрал существующую задачу, запусти Промпт файл задачи из папки .clinerules-bank.
4. Когда пользователь выбрал `Создать новую`, запроси имя задачи. 
Получив имя, запиши новую задачу в файл .clinerules-bank\.tasks и создай пустой файл задачи в папке .clinerules-bank.

Это позволит значительно упростить управление задачами.

# Эксперимент 2. Попытка реализации промпт-движка для сайта
Раз уж придумал понятие промпт-движок, то почему бы и не попытаться его реализовать.

В Cline пишу задачу:

# Общая задача
Это исследовательский проект. Я исследую возможность сделать промпт-программу.

Промпт-программа - это программа, код-алгоритм которой задан на естественном языке. И выполняется именно этот код-алгоритм большой языковой моделью (БЯМ).
Промпт-движок - это программа на классическом языке программирования, которая запускается на компьютере пользователя или на vds сервере и отправляет код-алгоритм, действия пользователя и данные, нужные для программы, в БЯМ. И получает от БЯМ текст с инструкциями для промпт-движка, классическим кодом, который надо выполнить, данными и соответствующим образом исполняет их.
Промпт-программа - это практически ИИ-агент. Просто немного с другой точки зрения.

Нужно создать папку с файлами кода-алгоритма на естественном языке. И создать промпт-движок, который будет выполнять этот код-алгоритм.

# Уточнение
1. Нужен промпт-движок для выполнения произвольного сайта, заданного в файлах кода-алгоритма на бекэнде. Для промпт-движка используем nodejs.
2. Для тестирования придумай код-алгоритм сайта конструктора сайтов.

В итоге, нейросеть вроде "поняла" задачу и написала кучу файлов с классическим кодом и кодом-алгоритмом на естественном языке.
Но при тестировании выяснилось, что нейросеть Cline недопоняла и вместо направления http запросов в БЯМ пишет для них обычный сайт.
Это поведение я поправил, но код-алгоритм написанный нейросетью Cline не "выполняет" сайт, а отдает текст как для чата.

Потратив очередные 2000р на нейросети, я решил сейчас остановиться. Наверно, реализовать задачу можно, но надо прилично времени и денег потратить. Что сейчас мне не охота делать ради этого экспиримента.

# Выводы
Идея промпт-программы выглядит интересно. Даже возможно может реализовать. Но куча денег и непонимание нейросетью задач, для которых она не тренирована, делает идею сомнительной. То есть, пока буду действовать как все: включать запросы к нейросети код классической программы, когда это выгодно.

Первый эксперимент считаю удачным, а второй провальным.

Я не люблю писать длинные статьи и написал вкратце, возможно, что-то не совсем понятно. Если что-то не понятно, задавайте вопросы и делитесь своим мнением в комментариях.
